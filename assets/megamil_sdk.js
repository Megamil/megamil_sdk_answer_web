document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector('script[data-sdk="megamil"]');var t=!0,n="demo2865406.mockable.io/";let a=e.getAttribute("data-sdk-token"),o=e.getAttribute("data-placeholder")||"Me pergunte qualquer coisa",i=e.getAttribute("data-error-message-default")||"Desculpe, tivemos um problema, por favor tente novamente.",l=e.getAttribute("data-unicode-icon-send")||"&#x1F680;",r=e.getAttribute("data-unicode-icon-open")||"&#x1F680;",d=e.getAttribute("data-unicode-icon-close")||"&#x58;",s=e.getAttribute("data-from-me-color")||"#248bf5",c=e.getAttribute("data-from-them-color")||"#e5e5ea",u=function e(){let t=document.createElement("div");return t.classList.add("modal"),t}(),p=function e(){let t=document.createElement("input");return t.type="text",t.placeholder=o,t.classList.add("chat-input"),t.style.zIndex="9999",t}(),m=function e(){let t=document.createElement("button");return t.innerHTML=l,t.classList.add("send-message-button"),t}(),h=function e(){let t=document.createElement("div");return t.classList.add("messagebox"),t}(),g=function e(){let t=document.createElement("div"),n=document.createElement("a");return n.href="https://www.megamil.com.br",n.target="_blank",n.textContent="Megamil 2023",t.appendChild(n),t.classList.add("credits"),t}(),f=!1;$(!1),fetch(L("api/valid?version=0.0.1"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then(e=>e.json()).then(e=>{e&&e.versionEnable&&e.payment?(t=e.isSecurity,n=e.server,$(!0)):C(i,!1)}).catch(e=>console.error(e)),document.body.appendChild(function e(){let t=document.createElement("div");return t.classList.add("float-chat-button"),t.innerHTML=l,t}()),document.body.appendChild(u);let b=document.querySelector(".float-chat-button");function $(e){p.value=e?"":"...",p.disabled=!e}function L(e){let a=t?"https://":"http://";return a+n+e}function v(e){let t=document.createElement("div");t.classList.add("time-line");let n=document.createElement("span");n.classList.add("time-label");let a=new Date,o=10>a.getDate()?"0"+a.getDate():a.getDate(),i=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,l=a.getFullYear(),r=10>a.getHours()?"0"+a.getHours():a.getHours(),d=10>a.getMinutes()?"0"+a.getMinutes():a.getMinutes();n.textContent=`${o}/${i}/${l} ${r}:${d}
`,t.appendChild(n),e.prepend(t)}function C(e,t){if(e){let n=document.createElement("p");n.classList.add("from-them"),n.classList.add("no-tail"),n.classList.add(t?"warning":"danger"),n.style.backgroundColor=c,n.textContent=e,v(n),h.prepend(n),h.scrollTop=0}}b.addEventListener("click",function(){f=!f,u.classList.toggle("modal-open"),b.innerHTML=f?d:r}),u.appendChild(p),u.appendChild(m),u.appendChild(h),u.appendChild(g),m.addEventListener("click",function e(){let t=p.value.trim();if(t){let n=document.createElement("p");n.classList.add("from-me"),n.textContent=t,n.style.backgroundColor=s,v(n),h.prepend(n),h.scrollTop=0,function e(){let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)};$(!1),fetch(L("api/ai"),t).then(e=>e.json()).then(e=>{if(e&&e.choices&&e.choices[0]&&e.choices[0].text){let t=e.choices[0].text;$(!0),function e(t){if(t){let n=document.createElement("p");n.classList.add("from-them"),n.textContent=t,n.style.backgroundColor=c,v(n),h.prepend(n),h.scrollTop=0}}(t)}else C(i,!1)}).catch(e=>console.error(e))}()}}),p.addEventListener("keyup",function(e){"Enter"===e.key&&(e.preventDefault(),m.click())})});